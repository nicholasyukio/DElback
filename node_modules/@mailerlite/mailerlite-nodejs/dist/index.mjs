import I from"axios";function o(i){if(!i)throw new Error("ID must be provided");if(typeof i=="number")throw new Error("ID must be of type string")}import y from"axios";function s(i="",e,t){let{headers:r={},method:a,body:A=null,params:x={}}=e,R=C(x);return R=R?`?${R}`:"",y({method:a,url:t.basePath+i+R,headers:{...r,Authorization:`Bearer ${t.api_key}`,"X-Requested-With":"XMLHttpRequest","Content-type":"application/json","accept-encoding":"null"},data:A&&JSON.stringify(A)})}function C(i,e){return Object.keys(i).map(r=>{let a=i[r];return i.constructor===Array?r=`${e}[]`:i.constructor===Object&&(r=e?`${e}[${r}]`:r),typeof a=="object"?C(a,r):`${r}=${encodeURIComponent(a)}`}).flat(10).join("&")}var n=class{config;constructor(e){this.config=e}get(e){return s("/api/subscribers",{method:"GET",params:e},this.config)}createOrUpdate(e){return s("/api/subscribers",{method:"POST",body:e},this.config)}find(e){return o(e),s(`/api/subscribers/${e}`,{method:"GET"},this.config)}getCount(){return s("/api/subscribers",{method:"GET",params:{limit:0}},this.config)}delete(e){return o(e),s(`/api/subscribers/${e}`,{method:"DELETE"},this.config)}forget(e){return o(e),s(`/api/subscribers/${e}/forget`,{method:"POST"},this.config)}};var p=class{config;constructor(e){this.config=e}get(e){return s("/api/campaigns",{method:"GET",params:e},this.config)}find(e){return o(e),s(`/api/campaigns/${e}`,{method:"GET"},this.config)}create(e){return s("/api/campaigns",{method:"POST",body:e},this.config)}update(e,t){return o(e),s(`/api/campaigns/${e}`,{method:"PUT",body:t},this.config)}schedule(e,t){return o(e),s(`/api/campaigns/${e}/schedule`,{method:"POST",body:t},this.config)}cancel(e){return o(e),s(`/api/campaigns/${e}/cancel`,{method:"POST"},this.config)}delete(e){return o(e),s(`/api/campaigns/${e}`,{method:"DELETE"},this.config)}};var m=class{config;constructor(e){this.config=e}get(e,t){return s(`/api/forms/${e}`,{method:"GET",params:t},this.config)}update(e,t){return o(e),s(`/api/forms/${e}`,{method:"PUT",body:t},this.config)}delete(e){return o(e),s(`/api/forms/${e}`,{method:"DELETE"},this.config)}};var c=class{config;constructor(e){this.config=e}get(e){return s("/api/groups",{method:"GET",params:e},this.config)}create(e){return s("/api/groups",{method:"POST",body:e},this.config)}update(e,t){return o(e),s(`/api/groups/${e}`,{method:"PUT",body:t},this.config)}delete(e){return o(e),s(`/api/groups/${e}`,{method:"DELETE"},this.config)}getSubscribers(e,t){return o(e),s(`/api/groups/${e}/subscribers`,{method:"GET",params:t},this.config)}assignSubscriber(e,t){return o(e),o(t),s(`/api/subscribers/${e}/groups/${t}`,{method:"POST"},this.config)}unAssignSubscriber(e,t){return o(e),o(t),s(`/api/subscribers/${e}/groups/${t}`,{method:"DELETE"},this.config)}};var u=class{config;constructor(e){this.config=e}get(e){return s("/api/segments",{method:"GET",params:e},this.config)}getSubscribers(e,t){return o(e),s(`/api/segments/${e}/subscribers`,{method:"GET",params:t},this.config)}update(e,t){return o(e),s(`/api/segments/${e}`,{method:"PUT",body:t},this.config)}delete(e){return o(e),s(`/api/segments/${e}`,{method:"DELETE"},this.config)}};var f=class{config;constructor(e){this.config=e}get(e){return s("/api/fields",{method:"GET",params:e},this.config)}create(e){return s("/api/fields",{method:"POST",body:e},this.config)}update(e,t){return o(e),s(`/api/fields/${e}`,{method:"PUT",body:t},this.config)}delete(e){return o(e),s(`/api/fields/${e}`,{method:"DELETE"},this.config)}};var g=class{config;constructor(e){this.config=e}get(e){return s("/api/automations",{method:"GET",params:e},this.config)}find(e){return o(e),s(`/api/automations/${e}`,{method:"GET"},this.config)}getAutomationSubscribers(e,t){return o(e),s(`/api/automations/${e}/activity`,{method:"GET",params:t},this.config)}};var l=class{config;constructor(e){this.config=e}get(){return s("/api/timezones",{method:"GET"},this.config)}};var b=class{config;constructor(e){this.config=e}get(){return s("/api/campaigns/languages",{method:"GET"},this.config)}};var h=class{config;constructor(e){this.config=e}send(e){return s("/api/batch",{method:"POST",body:e},this.config)}};var d=class{config;constructor(e){this.config=e}get(){return s("/api/webhooks",{method:"GET"},this.config)}find(e){return o(e),s(`/api/webhooks/${e}`,{method:"GET"},this.config)}create(e){return s("/api/webhooks",{method:"POST",body:e},this.config)}update(e,t){return s(`/api/webhooks/${e}`,{method:"PUT",body:t},this.config)}delete(e){return o(e),s(`/api/webhooks/${e}`,{method:"DELETE"},this.config)}};var P=class{config;constructor(e){this.config=e}getSentCampaigns(e){return e.filter={status:"sent"},s("/api/campaigns",{method:"GET",params:e},this.config)}async getSentCampaignStats(e){o(e);let t=await s(`/api/campaigns/${e}`,{method:"GET"},this.config);if(t.data&&t.data.data&&t.data.data.stats)return t.data.data.stats;throw t.data&&t.data.data&&t.data.data.status!=="sent"?new Error("No stats available. See if ID of a sent campaign was provided."):new Error("No stats available. See if correct ID was provided.")}async getSentCampaignSubscribers(e,t){return o(e),s(`/api/campaigns/${e}/reports/subscriber-activity`,{method:"POST",body:t},this.config)}getFormsByType(e,t){return s(`/api/forms/${e}`,{method:"GET",params:t},this.config)}async getFormsCountByType(e){let t=await s(`/api/forms/${e}`,{method:"GET"},this.config);if(t.data&&t.data&&t.data.meta&&t.data.meta.aggregations)return t.data.meta.aggregations[e];throw new Error("No stats available.")}getFormSubscribers(e,t){return s(`/api/forms/${e}/subscribers`,{method:"GET",params:t},this.config)}getAutomations(e){return s("/api/automations",{method:"GET",params:e},this.config)}async getAutomationStats(e){o(e);let t=await s(`/api/automations/${e}`,{method:"GET"},this.config);if(t.data&&t.data.data&&t.data.data.stats)return t.data.data.stats;throw new Error("No stats available.")}getAutomationSubscribers(e,t){return o(e),s(`/api/automations/${e}/activity`,{method:"GET",params:t},this.config)}};var S=class{config;subscribers;campaigns;forms;groups;segments;fields;automations;timezones;languages;batches;webhooks;stats;constructor(e){this.config={api_key:e.api_key,basePath:e.base_path||"https://connect.mailerlite.com"},this.subscribers=new n(this.config),this.campaigns=new p(this.config),this.forms=new m(this.config),this.groups=new c(this.config),this.segments=new u(this.config),this.fields=new f(this.config),this.automations=new g(this.config),this.timezones=new l(this.config),this.languages=new b(this.config),this.batches=new h(this.config),this.webhooks=new d(this.config),this.stats=new P(this.config)}};export{S as default};
//# sourceMappingURL=index.mjs.map