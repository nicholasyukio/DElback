"use strict";var E=Object.create;var S=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var w=(i,e)=>{for(var s in e)S(i,s,{get:e[s],enumerable:!0})},x=(i,e,s,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of L(e))!v.call(i,a)&&a!==s&&S(i,a,{get:()=>e[a],enumerable:!(r=F(e,a))||r.enumerable});return i};var y=(i,e,s)=>(s=i!=null?E($(i)):{},x(e||!i||!i.__esModule?S(s,"default",{value:i,enumerable:!0}):s,i)),U=i=>x(S({},"__esModule",{value:!0}),i);var k={};w(k,{default:()=>A});module.exports=U(k);var j=y(require("axios"));function o(i){if(!i)throw new Error("ID must be provided");if(typeof i=="number")throw new Error("ID must be of type string")}var G=y(require("axios"));function t(i="",e,s){let{headers:r={},method:a,body:C=null,params:T={}}=e,R=I(T);return R=R?`?${R}`:"",(0,G.default)({method:a,url:s.basePath+i+R,headers:{...r,Authorization:`Bearer ${s.api_key}`,"X-Requested-With":"XMLHttpRequest","Content-type":"application/json","accept-encoding":"null"},data:C&&JSON.stringify(C)})}function I(i,e){return Object.keys(i).map(r=>{let a=i[r];return i.constructor===Array?r=`${e}[]`:i.constructor===Object&&(r=e?`${e}[${r}]`:r),typeof a=="object"?I(a,r):`${r}=${encodeURIComponent(a)}`}).flat(10).join("&")}var n=class{config;constructor(e){this.config=e}get(e){return t("/api/subscribers",{method:"GET",params:e},this.config)}createOrUpdate(e){return t("/api/subscribers",{method:"POST",body:e},this.config)}find(e){return o(e),t(`/api/subscribers/${e}`,{method:"GET"},this.config)}getCount(){return t("/api/subscribers",{method:"GET",params:{limit:0}},this.config)}delete(e){return o(e),t(`/api/subscribers/${e}`,{method:"DELETE"},this.config)}forget(e){return o(e),t(`/api/subscribers/${e}/forget`,{method:"POST"},this.config)}};var p=class{config;constructor(e){this.config=e}get(e){return t("/api/campaigns",{method:"GET",params:e},this.config)}find(e){return o(e),t(`/api/campaigns/${e}`,{method:"GET"},this.config)}create(e){return t("/api/campaigns",{method:"POST",body:e},this.config)}update(e,s){return o(e),t(`/api/campaigns/${e}`,{method:"PUT",body:s},this.config)}schedule(e,s){return o(e),t(`/api/campaigns/${e}/schedule`,{method:"POST",body:s},this.config)}cancel(e){return o(e),t(`/api/campaigns/${e}/cancel`,{method:"POST"},this.config)}delete(e){return o(e),t(`/api/campaigns/${e}`,{method:"DELETE"},this.config)}};var m=class{config;constructor(e){this.config=e}get(e,s){return t(`/api/forms/${e}`,{method:"GET",params:s},this.config)}update(e,s){return o(e),t(`/api/forms/${e}`,{method:"PUT",body:s},this.config)}delete(e){return o(e),t(`/api/forms/${e}`,{method:"DELETE"},this.config)}};var c=class{config;constructor(e){this.config=e}get(e){return t("/api/groups",{method:"GET",params:e},this.config)}create(e){return t("/api/groups",{method:"POST",body:e},this.config)}update(e,s){return o(e),t(`/api/groups/${e}`,{method:"PUT",body:s},this.config)}delete(e){return o(e),t(`/api/groups/${e}`,{method:"DELETE"},this.config)}getSubscribers(e,s){return o(e),t(`/api/groups/${e}/subscribers`,{method:"GET",params:s},this.config)}assignSubscriber(e,s){return o(e),o(s),t(`/api/subscribers/${e}/groups/${s}`,{method:"POST"},this.config)}unAssignSubscriber(e,s){return o(e),o(s),t(`/api/subscribers/${e}/groups/${s}`,{method:"DELETE"},this.config)}};var u=class{config;constructor(e){this.config=e}get(e){return t("/api/segments",{method:"GET",params:e},this.config)}getSubscribers(e,s){return o(e),t(`/api/segments/${e}/subscribers`,{method:"GET",params:s},this.config)}update(e,s){return o(e),t(`/api/segments/${e}`,{method:"PUT",body:s},this.config)}delete(e){return o(e),t(`/api/segments/${e}`,{method:"DELETE"},this.config)}};var f=class{config;constructor(e){this.config=e}get(e){return t("/api/fields",{method:"GET",params:e},this.config)}create(e){return t("/api/fields",{method:"POST",body:e},this.config)}update(e,s){return o(e),t(`/api/fields/${e}`,{method:"PUT",body:s},this.config)}delete(e){return o(e),t(`/api/fields/${e}`,{method:"DELETE"},this.config)}};var g=class{config;constructor(e){this.config=e}get(e){return t("/api/automations",{method:"GET",params:e},this.config)}find(e){return o(e),t(`/api/automations/${e}`,{method:"GET"},this.config)}getAutomationSubscribers(e,s){return o(e),t(`/api/automations/${e}/activity`,{method:"GET",params:s},this.config)}};var l=class{config;constructor(e){this.config=e}get(){return t("/api/timezones",{method:"GET"},this.config)}};var b=class{config;constructor(e){this.config=e}get(){return t("/api/campaigns/languages",{method:"GET"},this.config)}};var h=class{config;constructor(e){this.config=e}send(e){return t("/api/batch",{method:"POST",body:e},this.config)}};var d=class{config;constructor(e){this.config=e}get(){return t("/api/webhooks",{method:"GET"},this.config)}find(e){return o(e),t(`/api/webhooks/${e}`,{method:"GET"},this.config)}create(e){return t("/api/webhooks",{method:"POST",body:e},this.config)}update(e,s){return t(`/api/webhooks/${e}`,{method:"PUT",body:s},this.config)}delete(e){return o(e),t(`/api/webhooks/${e}`,{method:"DELETE"},this.config)}};var P=class{config;constructor(e){this.config=e}getSentCampaigns(e){return e.filter={status:"sent"},t("/api/campaigns",{method:"GET",params:e},this.config)}async getSentCampaignStats(e){o(e);let s=await t(`/api/campaigns/${e}`,{method:"GET"},this.config);if(s.data&&s.data.data&&s.data.data.stats)return s.data.data.stats;throw s.data&&s.data.data&&s.data.data.status!=="sent"?new Error("No stats available. See if ID of a sent campaign was provided."):new Error("No stats available. See if correct ID was provided.")}async getSentCampaignSubscribers(e,s){return o(e),t(`/api/campaigns/${e}/reports/subscriber-activity`,{method:"POST",body:s},this.config)}getFormsByType(e,s){return t(`/api/forms/${e}`,{method:"GET",params:s},this.config)}async getFormsCountByType(e){let s=await t(`/api/forms/${e}`,{method:"GET"},this.config);if(s.data&&s.data&&s.data.meta&&s.data.meta.aggregations)return s.data.meta.aggregations[e];throw new Error("No stats available.")}getFormSubscribers(e,s){return t(`/api/forms/${e}/subscribers`,{method:"GET",params:s},this.config)}getAutomations(e){return t("/api/automations",{method:"GET",params:e},this.config)}async getAutomationStats(e){o(e);let s=await t(`/api/automations/${e}`,{method:"GET"},this.config);if(s.data&&s.data.data&&s.data.data.stats)return s.data.data.stats;throw new Error("No stats available.")}getAutomationSubscribers(e,s){return o(e),t(`/api/automations/${e}/activity`,{method:"GET",params:s},this.config)}};var A=class{config;subscribers;campaigns;forms;groups;segments;fields;automations;timezones;languages;batches;webhooks;stats;constructor(e){this.config={api_key:e.api_key,basePath:e.base_path||"https://connect.mailerlite.com"},this.subscribers=new n(this.config),this.campaigns=new p(this.config),this.forms=new m(this.config),this.groups=new c(this.config),this.segments=new u(this.config),this.fields=new f(this.config),this.automations=new g(this.config),this.timezones=new l(this.config),this.languages=new b(this.config),this.batches=new h(this.config),this.webhooks=new d(this.config),this.stats=new P(this.config)}};0&&(module.exports={});
//# sourceMappingURL=index.js.map